import ast
import inspect
import numpy as np
import pandas as pd

from functools import lru_cache
from collections import defaultdict


def flatten(nested_list):
    """Flattens arbitrarily nested list of lists"""
    tmp_list = []
    for i in nested_list:
        if isinstance(i, (int, str)):
            tmp_list.append(i)
        elif isinstance(i, (list, tuple)):
            tmp_list.extend(flatten(i))
    return tmp_list


class Netlist(pd.DataFrame):
    """A tabular dataframe for defining a circuit's netlist"""

    def __init__(self, *args, **kwargs):
        super().__init__(data={}, index=["nodes", "value"])

    def __setattr__(self, key, value):
        print(type(value))
        if isinstance(value[0], list):
            self[key] = value
        else:
            raise ValueError("Expected [nodes], value")

